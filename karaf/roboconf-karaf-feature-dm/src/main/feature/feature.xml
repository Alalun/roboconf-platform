<?xml version="1.0" encoding="UTF-8"?>
<features 
		name="roboconf-agent-karaf-${project.version}"
		xmlns="http://karaf.apache.org/xmlns/features/v1.2.0"
		xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
		xsi:schemaLocation="http://karaf.apache.org/xmlns/features/v1.2.0 http://karaf.apache.org/xmlns/features/v1.2.0">

	<!-- Specify where to find the iPojo feature -->
	<repository>mvn:org.apache.felix/org.apache.felix.ipojo.features/${ipojo.version}/xml</repository>

    <!-- The feature associated with the DM -->
    <feature name="roboconf-dm" version="${project.version}">
    	<feature version="${ipojo.version}">ipojo-all</feature>
    	<feature version="${jersey.stack.version}">jersey-1.x</feature>
    
    	<!-- Core bundles -->
        <bundle>mvn:net.roboconf/roboconf-core/${project.version}</bundle>
        <bundle>mvn:net.roboconf/roboconf-messaging/${project.version}</bundle>
        <bundle>mvn:net.roboconf/roboconf-dm-rest-commons/${project.version}</bundle>
        <bundle>mvn:net.roboconf/roboconf-dm-rest-services/${project.version}</bundle>
        <bundle>mvn:net.roboconf/roboconf-dm/${project.version}</bundle>
        <bundle>mvn:net.roboconf/roboconf-dm-web-administration/${project.version}/war</bundle>
        <bundle>mvn:net.roboconf/roboconf-target-api/${project.version}</bundle>
        
        <!-- Optional bundles, to start depending on our needs -->
        <bundle start="false">mvn:net.roboconf/roboconf-target-docker/${project.version}</bundle>
        <bundle start="false">mvn:net.roboconf/roboconf-target-embedded/${project.version}</bundle>
        <bundle start="false">mvn:net.roboconf/roboconf-target-iaas-azure/${project.version}</bundle>
        <bundle start="false">mvn:net.roboconf/roboconf-target-iaas-ec2/${project.version}</bundle>
        <bundle start="false">mvn:net.roboconf/roboconf-target-iaas-openstack/${project.version}</bundle>
        <bundle start="false">mvn:net.roboconf/roboconf-target-iaas-vmware/${project.version}</bundle>
    </feature>
    
    <!-- The feature for Jersey 1.x -->
    <feature name="jersey-1.x" version="${jersey.stack.version}">
        <bundle>mvn:com.sun.jersey/jersey-core/${jersey.stack.version}</bundle>
        <bundle>mvn:com.sun.jersey/jersey-server/${jersey.stack.version}</bundle>
        <bundle>mvn:com.sun.jersey/jersey-servlet/${jersey.stack.version}</bundle>
        <bundle>mvn:com.sun.jersey.contribs/jersey-multipart/${jersey.stack.version}</bundle>
        <bundle>mvn:org.jvnet/mimepull/1.6</bundle>
        
        <bundle>mvn:com.fasterxml.jackson.core/jackson-core/${jackson.stack.version}</bundle>
        <bundle>mvn:com.fasterxml.jackson.core/jackson-databind/${jackson.stack.version}</bundle>
        <bundle>mvn:com.fasterxml.jackson.core/jackson-annotations/${jackson.stack.version}</bundle>
        <bundle>mvn:com.fasterxml.jackson.jaxrs/jackson-jaxrs-base/${jackson.stack.version}</bundle>
        <bundle>mvn:com.fasterxml.jackson.jaxrs/jackson-jaxrs-json-provider/${jackson.stack.version}</bundle>
    </feature>
</features>
