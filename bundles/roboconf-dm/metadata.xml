<?xml version="1.0" encoding="UTF-8"?>
<ipojo 
		xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
		xsi:schemaLocation="org.apache.felix.ipojo http://felix.apache.org/ipojo/schemas/CURRENT/core.xsd"
		xmlns="org.apache.felix.ipojo">

	<!-- A component for the DM -->
	<component classname="net.roboconf.dm.management.Manager" immediate="true" name="roboconf-dm" public="false">
		<requires field="iaas" optional="true" />
		<requires field="configuration" optional="true" />
		<callback transition="invalidate" method="shutdown"/>
	</component>
	
	<!-- A component for its configuration -->
	<component classname="net.roboconf.dm.management.ManagerConfiguration" immediate="true" name="roboconf-dm-configuration" public="false">
		<requires field="manager" />
		<properties updated="update">
			<property name="message-server-ip" field="messageServerIp" />
			<property name="message-server-username" field="messageServerUsername" />
			<property name="message-server-password" field="messageServerPassword" />
			<property name="configuration-directory-location" field="configurationDirectoryLocation" />
		</properties>
	</component>
	
	<!-- And the instances... -->
	<instance component="roboconf-dm" name="Roboconf DM" />
	<instance component="roboconf-dm-configuration" name="Roboconf DM's configuration" />
</ipojo>
