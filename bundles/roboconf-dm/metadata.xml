<?xml version="1.0" encoding="UTF-8"?>
<ipojo 
		xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
		xsi:schemaLocation="org.apache.felix.ipojo http://felix.apache.org/ipojo/schemas/CURRENT/core.xsd"
		xmlns="org.apache.felix.ipojo">

	<!-- A component for the DM -->
	<component classname="net.roboconf.dm.management.Manager" name="roboconf-dm" public="false">
		<requires field="iaas" optional="true">
			<callback type="bind" method="iaasAppears"/>
			<callback type="unbind" method="iaasDisappears"/>
			<callback type="modified" method="iaasWasModified"/>
		</requires>
		
		<requires field="configuration" optional="true" />
		<callback transition="invalidate" method="shutdown"/>
		<provides />
	</component>
	
	<!-- A component for its configuration -->
	<component classname="net.roboconf.dm.management.ManagerConfiguration" name="roboconf-dm-configuration" public="false">
		<requires field="manager" />
		<provides />
		
		<properties updated="update" pid="net.roboconf.dm.configuration">
			<property name="message-server-ip" field="messageServerIp" />
			<property name="message-server-username" field="messageServerUsername" />
			<property name="message-server-password" field="messageServerPassword" />
			<property name="configuration-directory-location" field="configurationDirectoryLocation" />
		</properties>
	</component>
	
	<!-- And the instances... -->
	<instance component="roboconf-dm" name="Roboconf DM" />
	<instance component="roboconf-dm-configuration" name="Roboconf DM's configuration" />
</ipojo>
