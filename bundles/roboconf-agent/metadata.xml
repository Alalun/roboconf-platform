<?xml version="1.0" encoding="UTF-8"?>
<ipojo 
		xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
		xsi:schemaLocation="org.apache.felix.ipojo http://felix.apache.org/ipojo/schemas/CURRENT/core.xsd"
		xmlns="org.apache.felix.ipojo">

	<!-- Default component -->
	<component classname="net.roboconf.agent.internal.impl.DefaultAgentImpl" immediate="true" name="roboconf-agent-default" public="false">
		<requires field="plugins" optional="true" />
		<properties updated="updateConfiguration">
		
			<!-- Due to a limitation in iPojo 1.x, we must use the setter method and not the field name -->
			<property name="message-server-ip" method="setMessageServerIp" />
			<property name="message-server-username" method="setMessageServerUsername" />
			<property name="message-server-password" method="setMessageServerPassword" />
			<property name="application-name" method="setApplicationName" />
			<property name="root-instance-name" method="setRootInstanceName" />
			<property name="ip-address-of-the-agent" method="setIpAddress" />
			<property name="iaas-type" method="setIaasType" />
			<property name="override-properties-with-user-data" type="boolean" method="setOverrideProperties" />
		</properties>
	</component>
	
	<!-- Since its component's factory is not public, it is a singleton instance. -->
	<instance component="roboconf-agent-default" name="Default Agent Instance" />
	
	<!-- In-memory component -->
	<component classname="net.roboconf.agent.internal.impl.InMemoryAgentImpl" immediate="true" name="roboconf-agent-in-memory">
		<properties updated="updateConfiguration">
		
			<!-- Due to a limitation in iPojo 1.x, we must use the setter method and not the field name -->
			<!-- Values that will be set by the IaaS in memory -->
			<property name="message-server-ip" method="setMessageServerIp" />
			<property name="message-server-username" method="setMessageServerUsername" />
			<property name="message-server-password" method="setMessageServerPassword" />
			<property name="application-name" method="setApplicationName" />
			<property name="root-instance-name" method="setRootInstanceName" />
			
			<!-- Predefined Values -->
			<property name="ip-address-of-the-agent" method="setIpAddress" value="localhost" />
			<property name="iaas-type" method="setIaasType" value="in-memory" />
			<property name="override-properties-with-user-data" type="boolean" method="setOverrideProperties" value="false" />
		</properties>
	</component>
</ipojo>
